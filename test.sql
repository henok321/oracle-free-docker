SET

SERVEROUTPUT ON;

DROP PROCEDURE IF EXISTS PRINT_PERSON_NAME_IN_RANGE;

DROP TABLE IF EXISTS PERSON;

CREATE TABLE PERSON (
    ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
    NAME VARCHAR2(255) NOT NULL,
    CREATED_AT TIMESFTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (ID)
);

INSERT INTO PERSON (
    NAME
) VALUES (
    'Peter'
);

INSERT INTO PERSON (
    NAME
) VALUES (
    'Mary'
);

INSERT INTO PERSON (
    NAME
) VALUES (
    'Julia'
);

INSERT INTO PERSON (
    NAME
) VALUES (
    'Hans'
);

INSERT INTO PERSON (
    NAME
) VALUES (
    'Carl'
);

COMMIT;

CREATE

OR REPLACE PROCEDURE PRINT_PERSON_NAME_IN_RANGE (P_BEGIN IN LONG, P_END IN LONG) AS CURSOR C_PERSON IS

SELECT
    ID,
    NAME,
    CREATED_AT
FROM
    PERSON
WHERE
    ID BETWEEN P_BEGIN
    AND P_END;

BEGIN
    FOR CURRENT_PERSON IN C_PERSON LOOP
        DBMS_OUTPUT.PUT_LINE(CURRENT_PERSON.NAME);
    END LOOP;
END;
/
DECLARE
BEGIN
    PRINT_PERSON_NAME_IN_RANGE(0, 3);
END;
 -- add test data
 INSERT INTO PERSON (
    ID,
    NAME,
    CREATED
) VALUES (
    1,
    'John',
    DEFAULT
);
INSERT INTO PERSON (
    ID,
    NAME,
    CREATED
) VALUES (
    2,
    'Mary',
    DEFAULT
);
COMMIT;
 -- iterate over cursor with while loop
DECLARE
    CURSOR C_PERSON IS
        SELECT
            "ID",
            "NAME",
            "CREATED"
        FROM
            PERSON;
    V_PERSON_DATA C_PERSON % ROWTYPE;
BEGIN
    DBMS_OUTPUT.PUT_LINE('Start...');
    OPEN C_PERSON;
    FETCH C_PERSON INTO V_PERSON_DATA;
    WHILE C_PERSON % FOUND LOOP
        DBMS_OUTPUT.PUT_LINE( V_PERSON_DATA."NAME"
            || ' '
            || V_PERSON_DATA."CREATED" );
        FETCH C_PERSON INTO V_PERSON_DATA;
    END LOOP;
    CLOSE C_PERSON;
    COMMIT;
END;
/ -- iterate over cursor with for loop
DECLARE
    CURSOR C_PERSON IS
        SELECT
            "ID",
            "NAME",
            "CREATED"
        FROM
            PERSON;
BEGIN
    DBMS_OUTPUT.PUT_LINE('Start...');
    FOR V_PERSON_DATA IN C_PERSON LOOP
        DBMS_OUTPUT.PUT_LINE( V_PERSON_DATA."NAME"
            || ' '
            || V_PERSON_DATA."CREATED" );
    END LOOP;
    COMMIT;
END;
/